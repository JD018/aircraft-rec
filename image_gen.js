
// Aircraft Arrays //
// Military Airplanes
military_airplanes = [
    "F-22 Raptor", "F-35 Lightning II", "F-16 Fighting Falcon", "F-15 Eagle", "F/A-18 Hornet",
    "Eurofighter Typhoon", "Dassault Rafale", "Mikoyan MiG-29", "Sukhoi Su-27", "Sukhoi Su-57",
    "Lockheed Martin C-130 Hercules", "Boeing B-52 Stratofortress", "Northrop Grumman B-2 Spirit",
    "Boeing KC-135 Stratotanker", "Northrop Grumman E-2 Hawkeye", "A-10 Thunderbolt II", 
    "AH-64 Apache", "Sukhoi Su-35", "Mikoyan MiG-35", "J-20 Chengdu", "F-14 Tomcat",
    "Harrier Jump Jet", "F-4 Phantom II", "Boeing E-3 Sentry", "Tupolev Tu-160", "Dassault Mirage 2000",
    "Panavia Tornado", "Saab JAS 39 Gripen", "Lockheed P-3 Orion", "Boeing P-8 Poseidon",
    "Northrop Grumman RQ-4 Global Hawk", "Bell Boeing V-22 Osprey", "Lockheed U-2", "F-5 Freedom Fighter",
    "F-117 Nighthawk", "Sukhoi Su-24", "Mikoyan MiG-21", "Dassault Mirage F1", "Lockheed AC-130", 
    "F-8 Crusader", "F-86 Sabre", "F-100 Super Sabre", "B-1 Lancer", "Sukhoi Su-25", 
    "North American XB-70 Valkyrie", "Yakovlev Yak-130", "Grumman F-14 Tomcat", "Sukhoi Su-34", 
    "Boeing B-1B Lancer", "Lockheed C-5 Galaxy"
]

// Civilian GA Aircraft
civilian_ga_aircraft = [
    "Cessna 172", "Piper PA-28 Cherokee", "Beechcraft Bonanza", "Cirrus SR22", "Mooney M20", 
    "Diamond DA40", "Cessna 182 Skylane", "Piper PA-18 Super Cub", "Beechcraft Baron", 
    "Cessna 152", "Piper PA-32 Saratoga", "Cessna 206", "Socata TBM 940", "Cirrus SR20",
    "Cessna Citation Mustang", "Beechcraft King Air", "Gulfstream G550", "Cessna 310", 
    "Piper PA-46 Malibu", "Diamond DA42 Twin Star", "Piper PA-44 Seminole", "Bellanca Super Viking",
    "Cessna 210 Centurion", "Piper PA-28R Arrow", "Beechcraft Duke", "Quest Kodiak", 
    "Aviat Husky", "American Champion Scout", "Piper Cub", "Cirrus Vision SF50", 
    "Beechcraft Duchess", "Piper PA-23 Aztec", "Cessna 340", "Mooney Ovation", 
    "Cessna 150", "Diamond DA50", "Cirrus Jet", "Extra 330", "American Champion Citabria",
    "Van's RV-7", "Glasair Sportsman", "Piper M600", "Piper Meridian", "Beechcraft Travel Air",
    "Tecnam P2010", "Grob G120TP", "Lancair Legacy", "Columbia 400"
]

// Transport Class Aircraft
transport_class_aircraft = [
    "Boeing 747", "Airbus A380", "Boeing 777", "Boeing 787", "Airbus A350", 
    "Boeing 737", "Airbus A320", "McDonnell Douglas DC-10", "Lockheed L-1011 TriStar", 
    "Boeing 757", "Airbus A330", "Boeing 767", "Antonov An-225 Mriya", "Antonov An-124 Ruslan",
    "C-5M Super Galaxy", "Lockheed C-141 Starlifter", "Boeing C-17 Globemaster III", 
    "Airbus A400M Atlas", "Embraer E190", "Bombardier CRJ700", "Boeing 707", 
    "Douglas DC-8", "Lockheed C-130J Super Hercules", "Airbus Beluga", 
    "Sukhoi Superjet 100", "McDonnell Douglas MD-11", "ATR 72", "Bombardier Dash 8 Q400", 
    "Cessna Caravan", "Saab 340", "Fokker 100", "Embraer EMB-120 Brasilia", "Boeing 717",
    "Embraer E175", "Ilyushin Il-76", "Boeing KC-46 Pegasus", "Airbus A220", "Lockheed Martin LM-100J", 
    "De Havilland Canada Dash 7", "Antonov An-12", "Fokker F27 Friendship", "Embraer E170",
    "Boeing 727", "Boeing 737 MAX", "Airbus A321neo"
]

// Helicopters
helicopters = [
    "Bell 206", "Sikorsky UH-60 Black Hawk", "Boeing CH-47 Chinook", "Eurocopter AS350", 
    "Bell AH-1Z Viper", "Sikorsky CH-53E Super Stallion", "AgustaWestland AW109", 
    "Eurocopter EC145", "Mil Mi-8", "Robinson R44", "Bell 407", "Mil Mi-24 Hind", 
    "Kamov Ka-52", "MD Helicopters MD 500", "Airbus H145", "Boeing AH-64 Apache", 
    "Bell 429", "Kawasaki OH-1", "Sikorsky S-92", "Robinson R22", "Leonardo AW169",
    "Eurocopter Tiger", "Kamov Ka-27", "AgustaWestland AW139", "NHIndustries NH90", 
    "Airbus H225 Super Puma", "Kaman K-MAX", "Bell 212", "Sikorsky S-76", 
    "Mil Mi-26", "Agusta A109", "Enstrom 480", "Bell 412", "Kamov Ka-32",
    "Boeing AH-6 Little Bird", "Airbus H130", "Airbus H160", "Mil Mi-17", 
    "Westland Lynx", "Eurocopter EC120", "Sikorsky SH-3 Sea King", "MD Helicopters MD 902"
]

// Historical Aircraft
historical_aircraft = [
    "Supermarine Spitfire", "North American P-51 Mustang", "Messerschmitt Bf 109", 
    "Boeing B-17 Flying Fortress", "Mitsubishi A6M Zero", "Hawker Hurricane", 
    "Focke-Wulf Fw 190", "Douglas DC-3", "Consolidated B-24 Liberator", "Northrop P-61 Black Widow", 
    "De Havilland Mosquito", "Boeing B-29 Superfortress", "Grumman F6F Hellcat", 
    "Lockheed P-38 Lightning", "Curtiss P-40 Warhawk", "Gloster Meteor", "Messerschmitt Me 262", 
    "Vought F4U Corsair", "Bristol Beaufighter", "Grumman TBF Avenger", "Handley Page Halifax", 
    "Douglas SBD Dauntless", "Fairey Swordfish", "Junkers Ju 87 Stuka", "North American B-25 Mitchell", 
    "Heinkel He 111", "Grumman F8F Bearcat", "Lavochkin La-5", "Yak-3", "Nakajima Ki-43", 
    "Polikarpov I-16", "Lockheed F-104 Starfighter", "Republic P-47 Thunderbolt", 
    "Avro Lancaster", "Brewster F2A Buffalo", "Seversky P-35", "De Havilland Vampire", 
    "Mikoyan-Gurevich MiG-15", "Mitsubishi G4M", "Fairey Firefly", "Junkers Ju 52"
]

// Combine all categories into a dictionary
aircraft_categories = {
    "Military": military_airplanes,
    "Civilian GA": civilian_ga_aircraft,
    "Transport": transport_class_aircraft,
    "Helicopters": helicopters,
    "Historical": historical_aircraft,
}

// Select an Aircraft and Type
// Assuming aircraft_categories is an object with categories as keys
const selectedCategory = Object.keys(aircraft_categories)[Math.floor(Math.random() * Object.keys(aircraft_categories).length)];
const selectedAircraft = aircraft_categories[selectedCategory][Math.floor(Math.random() * aircraft_categories[selectedCategory].length)];

chosen = []
chosen.push(selectedAircraft)

// Function to get images based on the selected aircraft
async function fetchAircraftImage(selectedAircraft) {
    const searchTerm = selectedAircraft.replace(" ", "+");
    const url = `https://commons.wikimedia.org/w/index.php?search=${searchTerm}&title=Special:MediaSearch&go=Go&type=image`;

    try {
        const response = await fetch(url);

        // Check if the response was successful
        if (response.ok) {
            const htmlContent = await response.text();

            // Parse the HTML content
            const parser = new DOMParser();
            const doc = parser.parseFromString(htmlContent, "text/html");

            // Find image links with 'data-src' attribute
            const images = doc.querySelectorAll('img');
            const imageLinks = [];
            images.forEach(img => {
                const dataSrc = img.getAttribute('data-src');
                if (dataSrc) {
                    imageLinks.push(dataSrc);
                }
            });

            // Select a random image if available
            if (imageLinks.length > 0) {
                const randomIndex = Math.floor(Math.random() * imageLinks.length);
                const randomImageUrl = imageLinks[randomIndex];
                displayImage(randomImageUrl);
            } else {
                console.error("No images found.");
            }
        } else {
            console.error(`Failed to retrieve content. Status code: ${response.status}`);
        }
    } catch (error) {
        console.error("Error fetching the image:", error);
    }
}

// Function to display the image in the container section of the HTML
function displayImage(imageUrl) {
    const container = document.querySelector('.container');
    
    // Clear any existing image
    container.innerHTML = '';

    // Create a new img element and append it to the container
    const imgElement = document.createElement('img');
    imgElement.src = imageUrl;
    imgElement.alt = "Aircraft Image";
    imgElement.classList.add('aircraft-image');

    container.appendChild(imgElement);
}

// Example usage of the function
fetchAircraftImage(selectedAircraft);

const CORRECT = Math.floor(Math.random() * 3) + 1;

// Function to randomize and update button content
function setCorrectButton() {
    // Loop through the buttons and update their content
    for (let i = 1; i <= 3; i++) {
      const button = document.getElementById(`b${i}`);
      if (i === CORRECT) {
        button.innerHTML = selectedAircraft; // Set the random button as "CORRECT"
      } else {
        aircraft = ""
        while (true) {
            aircraft = aircraft_categories[selectedCategory][Math.floor(Math.random() * aircraft_categories[selectedCategory].length)];
            if (!chosen.includes(aircraft)) {
                chosen.push(aircraft)
                break
            }
        }

        button.innerHTML = aircraft; // Keep the others showing their ID
      }
    }
  }

  window.onload = function() {
    question = localStorage.getItem('question');
    if (question == 11) {
        // Redirect to the score.html page
        window.location.href = 'http://127.0.0.1:5500/score.html';
    }   

    // If score doesn't exist, initialize it to 1
    if (question === null) {
        question = 1;
    }

    document.getElementById('question').innerHTML = "Question " + question
  }
  
  // Call the function to set one button as "CORRECT"
  setCorrectButton();




  

// Function to check if the answer is correct or incorrect
function check(n) {
    // Disable the buttons
    const buttons = ['b1', 'b2', 'b3', 'b4'];
    buttons.forEach(buttonId => {
        const button = document.getElementById(buttonId);
        if (button) {
            button.disabled = true; // Disable the button
        }
    });

    const popup = document.createElement('div'); // Create a new popup div
    popup.classList.add('popup'); // Add popup class for styling

    // Check if the answer is correct
    if (n === CORRECT) {
        popup.innerHTML = 'Correct'; // Set text as "Correct"
        popup.classList.add('show'); // Add the show class to animate it
        popup.classList.remove('incorrect'); // Ensure it's not red
        popup.classList.add('correct'); // Apply green background for correct answer

        // Get and update score
        let score = localStorage.getItem('score');
        if (score === null) {
            score = 1;
        } else {
            score = parseInt(score) + 1;
        }
        localStorage.setItem('score', score);


        // Get and update question number
        let question = localStorage.getItem('question');
        if (question === null) {
            question = 1;
        } else {
            question = parseInt(question) + 1;
        }
        localStorage.setItem('question', question);


    } else {
        popup.innerHTML = 'Incorrect: ' + selectedAircraft; // Set text as "Incorrect"
        popup.classList.add('show'); // Add the show class to animate it
        popup.classList.remove('correct'); // Ensure it's not green
        popup.classList.add('incorrect'); // Apply red background for incorrect answer

        // Update question number
        let question = localStorage.getItem('question');
        if (question === null) {
            question = 1;
        } else {
            question = parseInt(question) + 1;
        }
        localStorage.setItem('question', question);

    }

    // Append the popup to the body
    document.body.appendChild(popup);

    // Remove the popup after 3 seconds (to make it disappear)
    setTimeout(() => {
        popup.classList.remove('show'); // This triggers the slide-down effect
        setTimeout(() => {
            popup.remove(); // Remove the popup from the DOM after it's hidden
        }, 500); // Wait for the animation to finish before removing
    }, 3000); // Keep the popup visible for 3 seconds

    // Wait for 4 seconds before refreshing the page
    setTimeout(function() {
        location.reload(); // Reload the page after 4 seconds
    }, 3500);
}










  function regenerate() {
    location.reload()
  }